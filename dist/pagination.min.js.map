{"version":3,"file":"pagination.min.js","sources":["../src/pagination.js"],"sourcesContent":["function webflowPagination(options) {\n  document.addEventListener('DOMContentLoaded', () => {\n    // デフォルト設定\n    const defaultOptions = {\n      splitTag: 'h3',\n      contentContainerSelector: '.rich-text-content',\n      paginationContainerSelector: '.pagination-container',\n      prevLinkClass: 'pagination-prev',\n      countLinkClass: 'pagination-count',\n      countLinkTextClass: 'pagination-count-text',\n      nextLinkClass: 'pagination-next',\n      prevText: '前へ',\n      nextText: '次へ',\n      currentPageLinkClass: 'active',\n      btnLinkTextClass: 'pagination-btn-text',\n      child: false\n    };\n\n    // オプションをマージ\n    const settings = { ...defaultOptions, ...options };\n\n    // 現在のページ番号を取得\n    const currentPage = new URLSearchParams(window.location.search).get('page') || 1;\n\n    // コンテンツコンテナを取得\n    const contentContainer = document.querySelector(settings.contentContainerSelector);\n\n    if (contentContainer) {\n      // コンテンツを指定されたタグで分割する関数\n      function splitContentByTag(tag, child) {\n        const contentParts = [];\n        let tempContainer = document.createElement('div');\n\n        if (child && tag.indexOf(' ') > -1 && tag.split(' ').length === 2 && tag.split(' ')[1]) {\n          const [parentTag, childTag] = tag.split(' ');\n          const parentElements = contentContainer.querySelectorAll(parentTag);\n\n          Array.from(contentContainer.children).forEach((child) => {\n            if (child.tagName.toLowerCase() === parentTag && child.querySelector(childTag)) {\n              if (tempContainer.children.length) {\n                contentParts.push(tempContainer.innerHTML);\n                tempContainer = document.createElement('div');\n              }\n            }\n            tempContainer.appendChild(child.cloneNode(true));\n          });\n        } else {\n          Array.from(contentContainer.children).forEach((child) => {\n            if (child.tagName.toLowerCase() === tag) {\n              if (tempContainer.children.length) {\n                contentParts.push(tempContainer.innerHTML);\n                tempContainer = document.createElement('div');\n              }\n            }\n            tempContainer.appendChild(child.cloneNode(true));\n          });\n        }\n\n        contentParts.push(tempContainer.innerHTML);\n\n        return contentParts;\n      }\n\n\n      // 分割されたコンテンツを取得\n      const contentParts = splitContentByTag(settings.splitTag, settings.child);\n\n      // 分割されたコンテンツを表示\n      contentContainer.innerHTML = contentParts[currentPage - 1] || '';\n\n      // ページネーション機能を実装\n      function createPagination(totalPages, currentPage) {\n        let paginationHtml = '';\n\n        // 前へのリンクを追加\n        if (currentPage > 1) {\n          paginationHtml += `<a href=\"?page=${currentPage - 1}\" class=\"${settings.prevLinkClass}\"><span class=\"${settings.btnLinkTextClass}\">${settings.prevText}</span></a>`;\n        }\n\n        // ページ番号のリンクを追加\n        for (let i = 1; i <= totalPages; i++) {\n          if (i === parseInt(currentPage)) {\n            paginationHtml += `<p class=\"${settings.countLinkClass} ${settings.currentPageLinkClass}\"><span class=\"${settings.countLinkTextClass}\">${i}</span></p>`;\n          } else {\n            paginationHtml += `<a href=\"?page=${i}\" class=\"${settings.countLinkClass}\"><span class=\"${settings.countLinkTextClass}\">${i}<span></a>`;\n          }\n        }\n\n        // 次へのリンクを追加\n        if (currentPage < totalPages) {\n          paginationHtml += `<a href=\"?page=${currentPage + 1}\" class=\"${settings.nextLinkClass}\"><span class=\"${settings.btnLinkTextClass}\">${settings.nextText}</span></a>`;\n        }\n\n        return paginationHtml;\n      }\n\n\n      // ページネーションHTMLを生成\n      const totalPages = contentParts.length;\n\n      let paginationHtml = createPagination(totalPages, parseInt(currentPage));\n\n      // ページネーシーションHTMLを挿入\n      const paginationContainer = document.querySelector(settings.paginationContainerSelector);\n      paginationContainer.innerHTML = paginationHtml;\n\n      // クリックイベントを追加\n      paginationContainer.addEventListener('click', (event) => {\n        if (event.target.classList.contains('pagination-ellipsis')) {\n          event.preventDefault();\n          const startPage = parseInt(event.target.getAttribute('data-start-page'));\n          paginationHtml = createPagination(totalPages, parseInt(currentPage), startPage);\n          paginationContainer.innerHTML = paginationHtml;\n        }\n        // 前のページ部分に戻るリンクのクリックイベント\n        if (event.target.classList.contains('pagination-ellipsis-back')) {\n          event.preventDefault();\n          const startPage = parseInt(event.target.getAttribute('data-start-page'));\n          paginationHtml = createPagination(totalPages, parseInt(currentPage), startPage);\n          paginationContainer.innerHTML = paginationHtml;\n        }\n      });\n\n      // splitTagが存在しない場合、ページネーションを非表示にする\n      if (contentParts.length <= 1) {\n        document.querySelector(settings.paginationContainerSelector).style.display = 'none';\n        return;\n      }\n\n    }\n  });\n}\n\nwindow.webflowPagination = webflowPagination;"],"names":["window","webflowPagination","options","document","addEventListener","settings","splitTag","contentContainerSelector","paginationContainerSelector","prevLinkClass","countLinkClass","countLinkTextClass","nextLinkClass","prevText","nextText","currentPageLinkClass","btnLinkTextClass","child","currentPage","URLSearchParams","location","search","get","contentContainer","querySelector","splitContentByTag","tag","contentParts","tempContainer","createElement","indexOf","split","length","parentTag","childTag","querySelectorAll","Array","from","children","forEach","tagName","toLowerCase","push","innerHTML","appendChild","cloneNode","createPagination","totalPages","paginationHtml","i","parseInt","paginationContainer","event","target","classList","contains","preventDefault","getAttribute","style","display"],"mappings":"yBAqIAA,OAAOC,kBArIP,SAA2BC,GACzBC,SAASC,iBAAiB,oBAAoB,KAE5C,MAgBMC,EAAW,CAffC,SAAU,KACVC,yBAA0B,qBAC1BC,4BAA6B,wBAC7BC,cAAe,kBACfC,eAAgB,mBAChBC,mBAAoB,wBACpBC,cAAe,kBACfC,SAAU,KACVC,SAAU,KACVC,qBAAsB,SACtBC,iBAAkB,sBAClBC,OAAO,KAIgCf,GAGnCgB,EAAc,IAAIC,gBAAgBnB,OAAOoB,SAASC,QAAQC,IAAI,SAAW,EAGzEC,EAAmBpB,SAASqB,cAAcnB,EAASE,0BAEzD,GAAIgB,EAAkB,CAEpB,SAASE,EAAkBC,EAAKT,GAC9B,MAAMU,EAAe,GACrB,IAAIC,EAAgBzB,SAAS0B,cAAc,OAE3C,GAAIZ,GAASS,EAAII,QAAQ,MAAQ,GAA+B,IAA1BJ,EAAIK,MAAM,KAAKC,QAAgBN,EAAIK,MAAM,KAAK,GAAI,CACtF,MAAOE,EAAWC,GAAYR,EAAIK,MAAM,KACjBR,EAAiBY,iBAAiBF,GAEzDG,MAAMC,KAAKd,EAAiBe,UAAUC,SAAStB,IACzCA,EAAMuB,QAAQC,gBAAkBR,GAAahB,EAAMO,cAAcU,IAC/DN,EAAcU,SAASN,SACzBL,EAAae,KAAKd,EAAce,WAChCf,EAAgBzB,SAAS0B,cAAc,QAG3CD,EAAcgB,YAAY3B,EAAM4B,WAAU,GAAM,GAEpD,MACET,MAAMC,KAAKd,EAAiBe,UAAUC,SAAStB,IACzCA,EAAMuB,QAAQC,gBAAkBf,GAC9BE,EAAcU,SAASN,SACzBL,EAAae,KAAKd,EAAce,WAChCf,EAAgBzB,SAAS0B,cAAc,QAG3CD,EAAcgB,YAAY3B,EAAM4B,WAAU,GAAM,IAMpD,OAFAlB,EAAae,KAAKd,EAAce,WAEzBhB,CACT,CAIA,MAAMA,EAAeF,EAAkBpB,EAASC,SAAUD,EAASY,OAMnE,SAAS6B,EAAiBC,EAAY7B,GACpC,IAAI8B,EAAiB,GAGjB9B,EAAc,IAChB8B,GAAmB,kBAAiB9B,EAAc,aAAab,EAASI,+BAA+BJ,EAASW,qBAAqBX,EAASQ,uBAIhJ,IAAK,IAAIoC,EAAI,EAAGA,GAAKF,EAAYE,IAC3BA,IAAMC,SAAShC,GACjB8B,GAAmB,aAAY3C,EAASK,kBAAkBL,EAASU,sCAAsCV,EAASM,uBAAuBsC,eAEzID,GAAmB,kBAAiBC,aAAa5C,EAASK,gCAAgCL,EAASM,uBAAuBsC,cAS9H,OAJI/B,EAAc6B,IAChBC,GAAmB,kBAAiB9B,EAAc,aAAab,EAASO,+BAA+BP,EAASW,qBAAqBX,EAASS,uBAGzIkC,CACT,CA1BAzB,EAAiBoB,UAAYhB,EAAaT,EAAc,IAAM,GA8B9D,MAAM6B,EAAapB,EAAaK,OAEhC,IAAIgB,EAAiBF,EAAiBC,EAAYG,SAAShC,IAG3D,MAAMiC,EAAsBhD,SAASqB,cAAcnB,EAASG,6BAqB5D,GApBA2C,EAAoBR,UAAYK,EAGhCG,EAAoB/C,iBAAiB,SAAUgD,IACzCA,EAAMC,OAAOC,UAAUC,SAAS,yBAClCH,EAAMI,iBACYN,SAASE,EAAMC,OAAOI,aAAa,oBACrDT,EAAiBF,EAAiBC,EAAYG,SAAShC,IACvDiC,EAAoBR,UAAYK,GAG9BI,EAAMC,OAAOC,UAAUC,SAAS,8BAClCH,EAAMI,iBACYN,SAASE,EAAMC,OAAOI,aAAa,oBACrDT,EAAiBF,EAAiBC,EAAYG,SAAShC,IACvDiC,EAAoBR,UAAYK,EAClC,IAIErB,EAAaK,QAAU,EAEzB,YADA7B,SAASqB,cAAcnB,EAASG,6BAA6BkD,MAAMC,QAAU,OAIjF,IAEJ"}