{"version":3,"file":"pagination.min.js","sources":["../src/pagination.js"],"sourcesContent":["function splitContentByTag(contentContainer, tag) {\n  const contentParts = [];\n  let tempContainer = document.createElement('div');\n\n  Array.from(contentContainer.children).forEach((child) => {\n    if (child.tagName.toLowerCase() === tag) {\n      if (tempContainer.children.length) {\n        contentParts.push(tempContainer.innerHTML);\n        tempContainer = document.createElement('div');\n      }\n    }\n    tempContainer.appendChild(child.cloneNode(true));\n  });\n\n  contentParts.push(tempContainer.innerHTML);\n\n  return contentParts;\n}\n\nfunction createPagination(totalPages, currentPage) {\n  let paginationHtml = '';\n\n  if (currentPage > 1) {\n    paginationHtml += `<a href=\"?page=${currentPage - 1}\" class=\"pagination-prev\">前へ</a>`;\n  }\n\n  for (let i = 1; i <= totalPages; i++) {\n    if (i === parseInt(currentPage)) {\n      paginationHtml += `<span class=\"pagination-count active\">${i}</span>`;\n    } else {\n      paginationHtml += `<a href=\"?page=${i}\" class=\"pagination-count\">${i}</a>`;\n    }\n  }\n\n  if (currentPage < totalPages) {\n    paginationHtml += `<a href=\"?page=${currentPage + 1}\" class=\"pagination-next\">次へ</a>`;\n  }\n\n  return paginationHtml;\n}\n\nfunction webflowPagination(options) {\n  document.addEventListener('DOMContentLoaded', () => {\n    const defaultOptions = {\n      splitTag: 'h3',\n      contentContainerSelector: '.rich-text-content',\n      paginationContainerSelector: '.pagination-container',\n    };\n\n    const settings = { ...defaultOptions, ...options };\n\n    const currentPage = new URLSearchParams(window.location.search).get('page') || 1;\n    const contentContainer = document.querySelector(settings.contentContainerSelector);\n\n    if (contentContainer) {\n      const contentParts = splitContentByTag(contentContainer, settings.splitTag);\n      contentContainer.innerHTML = contentParts[currentPage - 1] || '';\n\n      const totalPages = contentParts.length;\n      const paginationHtml = createPagination(totalPages, parseInt(currentPage));\n\n      const paginationContainer = document.querySelector(settings.paginationContainerSelector);\n      paginationContainer.innerHTML = paginationHtml;\n\n      paginationContainer.addEventListener('click', (event) => {\n        if (event.target.classList.contains('pagination-ellipsis')) {\n          event.preventDefault();\n          const startPage = parseInt(event.target.getAttribute('data-start-page'));\n          const updatedPaginationHtml = createPagination(totalPages, parseInt(currentPage), startPage);\n          paginationContainer.innerHTML = updatedPaginationHtml;\n        }\n        if (event.target.classList.contains('pagination-ellipsis-back')) {\n          event.preventDefault();\n          const startPage = parseInt(event.target.getAttribute('data-start-page'));\n          const updatedPaginationHtml = createPagination(totalPages, parseInt(currentPage), startPage);\n          paginationContainer.innerHTML = updatedPaginationHtml;\n        }\n      });\n    }\n  });\n}\n\nwindow.webflowPagination = webflowPagination;\n"],"names":["createPagination","totalPages","currentPage","paginationHtml","i","parseInt","window","webflowPagination","options","document","addEventListener","settings","splitTag","contentContainerSelector","paginationContainerSelector","URLSearchParams","location","search","get","contentContainer","querySelector","contentParts","tag","tempContainer","createElement","Array","from","children","forEach","child","tagName","toLowerCase","length","push","innerHTML","appendChild","cloneNode","splitContentByTag","paginationContainer","event","target","classList","contains","preventDefault","getAttribute","updatedPaginationHtml"],"mappings":"yBAmBA,SAASA,EAAiBC,EAAYC,GACpC,IAAIC,EAAiB,GAEjBD,EAAc,IAChBC,GAAmB,kBAAiBD,EAAc,qCAGpD,IAAK,IAAIE,EAAI,EAAGA,GAAKH,EAAYG,IAC3BA,IAAMC,SAASH,GACjBC,GAAmB,yCAAwCC,WAE3DD,GAAmB,kBAAiBC,+BAA+BA,QAQvE,OAJIF,EAAcD,IAChBE,GAAmB,kBAAiBD,EAAc,qCAG7CC,CACT,CA2CAG,OAAOC,kBAzCP,SAA2BC,GACzBC,SAASC,iBAAiB,oBAAoB,KAC5C,MAMMC,EAAW,CALfC,SAAU,KACVC,yBAA0B,qBAC1BC,4BAA6B,2BAGUN,GAEnCN,EAAc,IAAIa,gBAAgBT,OAAOU,SAASC,QAAQC,IAAI,SAAW,EACzEC,EAAmBV,SAASW,cAAcT,EAASE,0BAEzD,GAAIM,EAAkB,CACpB,MAAME,EAvDZ,SAA2BF,EAAkBG,GAC3C,MAAMD,EAAe,GACrB,IAAIE,EAAgBd,SAASe,cAAc,OAc3C,OAZAC,MAAMC,KAAKP,EAAiBQ,UAAUC,SAASC,IACzCA,EAAMC,QAAQC,gBAAkBT,GAC9BC,EAAcI,SAASK,SACzBX,EAAaY,KAAKV,EAAcW,WAChCX,EAAgBd,SAASe,cAAc,QAG3CD,EAAcY,YAAYN,EAAMO,WAAU,GAAM,IAGlDf,EAAaY,KAAKV,EAAcW,WAEzBb,CACT,CAsC2BgB,CAAkBlB,EAAkBR,EAASC,UAClEO,EAAiBe,UAAYb,EAAanB,EAAc,IAAM,GAE9D,MAAMD,EAAaoB,EAAaW,OAC1B7B,EAAiBH,EAAiBC,EAAYI,SAASH,IAEvDoC,EAAsB7B,SAASW,cAAcT,EAASG,6BAC5DwB,EAAoBJ,UAAY/B,EAEhCmC,EAAoB5B,iBAAiB,SAAU6B,IAC7C,GAAIA,EAAMC,OAAOC,UAAUC,SAAS,uBAAwB,CAC1DH,EAAMI,iBACYtC,SAASkC,EAAMC,OAAOI,aAAa,oBACrD,MAAMC,EAAwB7C,EAAiBC,EAAYI,SAASH,IACpEoC,EAAoBJ,UAAYW,CAClC,CACA,GAAIN,EAAMC,OAAOC,UAAUC,SAAS,4BAA6B,CAC/DH,EAAMI,iBACYtC,SAASkC,EAAMC,OAAOI,aAAa,oBACrD,MAAMC,EAAwB7C,EAAiBC,EAAYI,SAASH,IACpEoC,EAAoBJ,UAAYW,CAClC,IAEJ,IAEJ"}