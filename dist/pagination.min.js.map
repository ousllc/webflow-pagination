{"version":3,"file":"pagination.min.js","sources":["../src/pagination.js"],"sourcesContent":["export default function webflowPagination(options) {\n  // デフォルト設定\n  const defaultOptions = {\n    splitTag: 'h3',\n    contentContainerSelector: '.rich-text-content',\n    paginationContainerSelector: '.pagination-container',\n  };\n\n  // オプションをマージ\n  const settings = { ...defaultOptions, ...options };\n\n  // 現在のページ番号を取得\n  const currentPage = new URLSearchParams(window.location.search).get('page') || 1;\n\n  // コンテンツコンテナを取得\n  const contentContainer = document.querySelector(settings.contentContainerSelector);\n\n  if (contentContainer) {\n    // コンテンツを指定されたタグで分割する関数\n    function splitContentByTag(tag) {\n      const contentParts = [];\n      let tempContainer = document.createElement('div');\n\n      Array.from(contentContainer.children).forEach((child) => {\n        if (child.tagName.toLowerCase() === tag) {\n          if (tempContainer.children.length) {\n            contentParts.push(tempContainer.innerHTML);\n            tempContainer = document.createElement('div');\n          }\n        }\n        tempContainer.appendChild(child.cloneNode(true));\n      });\n\n      contentParts.push(tempContainer.innerHTML);\n\n      return contentParts;\n    }\n\n    // 分割されたコンテンツを取得\n    const contentParts = splitContentByTag(settings.splitTag);\n\n    // 分割されたコンテンツを表示\n    contentContainer.innerHTML = contentParts[currentPage - 1] || '';\n\n    // ページネーション機能を実装\n    function createPagination(totalPages, currentPage, startPage = 1) {\n      let paginationHtml = '';\n\n      // 前へのリンクを追加\n      if (currentPage > 1) {\n        paginationHtml += `<a href=\"?page=${currentPage - 1}\" class=\"pagination-prev\">前へ</a>`;\n      }\n\n      // ページ番号のリンクを追加\n      for (let i = startPage; i < startPage + 4; i++) {\n        if (i === parseInt(currentPage)) {\n          paginationHtml += `<span class=\"pagination-count active\">${i}</span>`;\n        } else {\n          paginationHtml += `<a href=\"?page=${i}\" class=\"pagination-count\">${i}</a>`;\n        }\n      }\n\n      // 前のページ部分に戻るリンクを追加\n      if (startPage > 1) {\n        paginationHtml += `<a href=\"#\" class=\"pagination-ellipsis-back\" data-start-page=\"${startPage - 4}\">...</a>`;\n        paginationHtml += `<a href=\"?page=1\" class=\"pagination-count\">1</a>`;\n      }\n\n      // 次のページ部分に進むリンクを追加\n      if (totalPages > startPage + 3) {\n        paginationHtml += `<a href=\"#\" class=\"pagination-ellipsis\" data-start-page=\"${startPage + 4}\">...</a>`;\n        paginationHtml += `<a href=\"?page=${totalPages}\" class=\"pagination-count\">${totalPages}</a>`;\n      }\n\n      // 次へのリンクを追加\n      if (currentPage < totalPages) {\n        paginationHtml += `<a href=\"?page=${currentPage + 1}\" class=\"pagination-next\">次へ</a>`;\n      }\n\n      return paginationHtml;\n    }\n\n    // ページネーションHTMLを生成\n    const totalPages = contentParts.length;\n    let paginationHtml = createPagination(totalPages, parseInt(currentPage));\n\n    // ページネーシーションHTMLを挿入\n    const paginationContainer = document.querySelector(settings.paginationContainerSelector);\n    paginationContainer.innerHTML = paginationHtml;\n\n    // クリックイベントを追加\n    paginationContainer.addEventListener('click', (event) => {\n      if (event.target.classList.contains('pagination-ellipsis')) {\n        event.preventDefault();\n        const startPage = parseInt(event.target.getAttribute('data-start-page'));\n        paginationHtml = createPagination(totalPages, parseInt(currentPage), startPage);\n        paginationContainer.innerHTML = paginationHtml;\n      }\n      // 前のページ部分に戻るリンクのクリックイベント\n      if (event.target.classList.contains('pagination-ellipsis-back')) {\n        event.preventDefault();\n        const startPage = parseInt(event.target.getAttribute('data-start-page'));\n        paginationHtml = createPagination(totalPages, parseInt(currentPage), startPage);\n        paginationContainer.innerHTML = paginationHtml;\n      }\n    });\n  }\n}"],"names":["options","settings","splitTag","contentContainerSelector","paginationContainerSelector","currentPage","URLSearchParams","window","location","search","get","contentContainer","document","querySelector","splitContentByTag","tag","contentParts","tempContainer","createElement","Array","from","children","forEach","child","tagName","toLowerCase","length","push","innerHTML","appendChild","cloneNode","createPagination","totalPages","startPage","paginationHtml","i","parseInt","paginationContainer","addEventListener","event","target","classList","contains","preventDefault","getAttribute"],"mappings":"qDAAe,SAA2BA,GAExC,MAOMC,EAAW,CANfC,SAAU,KACVC,yBAA0B,qBAC1BC,4BAA6B,2BAIUJ,GAGnCK,EAAc,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQC,IAAI,SAAW,EAGzEC,EAAmBC,SAASC,cAAcZ,EAASE,0BAEzD,GAAIQ,EAAkB,CAEpB,SAASG,EAAkBC,GACzB,MAAMC,EAAe,GACrB,IAAIC,EAAgBL,SAASM,cAAc,OAc3C,OAZAC,MAAMC,KAAKT,EAAiBU,UAAUC,SAASC,IACzCA,EAAMC,QAAQC,gBAAkBV,GAC9BE,EAAcI,SAASK,SACzBV,EAAaW,KAAKV,EAAcW,WAChCX,EAAgBL,SAASM,cAAc,QAG3CD,EAAcY,YAAYN,EAAMO,WAAU,GAAM,IAGlDd,EAAaW,KAAKV,EAAcW,WAEzBZ,CACT,CAGA,MAAMA,EAAeF,EAAkBb,EAASC,UAMhD,SAAS6B,EAAiBC,EAAY3B,EAAa4B,EAAY,GAC7D,IAAIC,EAAiB,GAGjB7B,EAAc,IAChB6B,GAAmB,kBAAiB7B,EAAc,qCAIpD,IAAK,IAAI8B,EAAIF,EAAWE,EAAIF,EAAY,EAAGE,IACrCA,IAAMC,SAAS/B,GACjB6B,GAAmB,yCAAwCC,WAE3DD,GAAmB,kBAAiBC,+BAA+BA,QAqBvE,OAhBIF,EAAY,IACdC,GAAmB,iEAAgED,EAAY,aAC/FC,GAAmB,oDAIjBF,EAAaC,EAAY,IAC3BC,GAAmB,4DAA2DD,EAAY,aAC1FC,GAAmB,kBAAiBF,+BAAwCA,SAI1E3B,EAAc2B,IAChBE,GAAmB,kBAAiB7B,EAAc,qCAG7C6B,CACT,CAtCAvB,EAAiBiB,UAAYZ,EAAaX,EAAc,IAAM,GAyC9D,MAAM2B,EAAahB,EAAaU,OAChC,IAAIQ,EAAiBH,EAAiBC,EAAYI,SAAS/B,IAG3D,MAAMgC,EAAsBzB,SAASC,cAAcZ,EAASG,6BAC5DiC,EAAoBT,UAAYM,EAGhCG,EAAoBC,iBAAiB,SAAUC,IAC7C,GAAIA,EAAMC,OAAOC,UAAUC,SAAS,uBAAwB,CAC1DH,EAAMI,iBACN,MAAMV,EAAYG,SAASG,EAAMC,OAAOI,aAAa,oBACrDV,EAAiBH,EAAiBC,EAAYI,SAAS/B,GAAc4B,GACrEI,EAAoBT,UAAYM,CAClC,CAEA,GAAIK,EAAMC,OAAOC,UAAUC,SAAS,4BAA6B,CAC/DH,EAAMI,iBACN,MAAMV,EAAYG,SAASG,EAAMC,OAAOI,aAAa,oBACrDV,EAAiBH,EAAiBC,EAAYI,SAAS/B,GAAc4B,GACrEI,EAAoBT,UAAYM,CAClC,IAEJ,CACF"}